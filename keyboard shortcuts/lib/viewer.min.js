!(function (t, e) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = e())
    : "function" == typeof define && define.amd
    ? define(e)
    : ((t = "undefined" != typeof globalThis ? globalThis : t || self).Viewer =
        e());
})(this, function () {
  "use strict";
  function e(e, t) {
    var i,
      n = Object.keys(e);
    return (
      Object.getOwnPropertySymbols &&
        ((i = Object.getOwnPropertySymbols(e)),
        t &&
          (i = i.filter(function (t) {
            return Object.getOwnPropertyDescriptor(e, t).enumerable;
          })),
        n.push.apply(n, i)),
      n
    );
  }
  function l(n) {
    for (var t = 1; t < arguments.length; t++) {
      var s = null != arguments[t] ? arguments[t] : {};
      t % 2
        ? e(Object(s), !0).forEach(function (t) {
            var e, i;
            (e = n),
              (t = s[(i = t)]),
              i in e
                ? Object.defineProperty(e, i, {
                    value: t,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0,
                  })
                : (e[i] = t);
          })
        : Object.getOwnPropertyDescriptors
        ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(s))
        : e(Object(s)).forEach(function (t) {
            Object.defineProperty(n, t, Object.getOwnPropertyDescriptor(s, t));
          });
    }
    return n;
  }
  function i(t) {
    return (i =
      "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
        ? function (t) {
            return typeof t;
          }
        : function (t) {
            return t &&
              "function" == typeof Symbol &&
              t.constructor === Symbol &&
              t !== Symbol.prototype
              ? "symbol"
              : typeof t;
          })(t);
  }
  function s(t, e) {
    for (var i = 0; i < e.length; i++) {
      var n = e[i];
      (n.enumerable = n.enumerable || !1),
        (n.configurable = !0),
        "value" in n && (n.writable = !0),
        Object.defineProperty(t, n.key, n);
    }
  }
  var o = {
      backdrop: !0,
      button: !0,
      navbar: !0,
      title: !0,
      toolbar: !0,
      className: "",
      container: "body",
      filter: null,
      fullscreen: !0,
      inheritedAttributes: [
        "crossOrigin",
        "decoding",
        "isMap",
        "loading",
        "referrerPolicy",
        "sizes",
        "srcset",
        "useMap",
      ],
      initialViewIndex: 0,
      inline: !1,
      interval: 5e3,
      keyboard: !0,
      focus: !0,
      loading: !0,
      loop: !0,
      minWidth: 200,
      minHeight: 100,
      movable: !0,
      rotatable: !0,
      scalable: !0,
      zoomable: !0,
      zoomOnTouch: !0,
      zoomOnWheel: !0,
      slideOnTouch: !0,
      toggleOnDblclick: !0,
      tooltip: !0,
      transition: !0,
      zIndex: 2015,
      zIndexInline: 0,
      zoomRatio: 0.1,
      minZoomRatio: 0.01,
      maxZoomRatio: 100,
      url: "src",
      ready: null,
      show: null,
      shown: null,
      hide: null,
      hidden: null,
      view: null,
      viewed: null,
      move: null,
      moved: null,
      rotate: null,
      rotated: null,
      scale: null,
      scaled: null,
      zoom: null,
      zoomed: null,
      play: null,
      stop: null,
    },
    t = "undefined" != typeof window && void 0 !== window.document,
    n = t ? window : {},
    a =
      !(!t || !n.document.documentElement) &&
      "ontouchstart" in n.document.documentElement,
    r = t && "PointerEvent" in n,
    g = "viewer",
    c = "move",
    u = "switch",
    d = "zoom",
    f = g + "-active",
    v = g + "-fade",
    p = g + "-fixed",
    h = g + "-fullscreen-exit",
    b = g + "-hide",
    m = g + "-in",
    w = g + "-invisible",
    y = g + "-loading",
    x = g + "-open",
    k = g + "-show",
    z = g + "-transition",
    D = "click",
    T = "dblclick",
    E = "dragstart",
    I = "focusin",
    A = "keydown",
    S = "load",
    O = "error",
    C = r ? "pointerdown" : a ? "touchstart" : "mousedown",
    R = r ? "pointermove" : a ? "touchmove" : "mousemove",
    L = r ? "pointerup pointercancel" : a ? "touchend touchcancel" : "mouseup",
    F = "resize",
    N = "transitionend",
    Y = "wheel",
    X = "ready",
    M = "show",
    P = "viewed",
    q = "rotated",
    W = g + "Action",
    j = /\s\s*/,
    H = [
      "zoom-in",
      "zoom-out",
      "one-to-one",
      "reset",
      "prev",
      "play",
      "next",
      "rotate-left",
      "rotate-right",
      "flip-horizontal",
      "flip-vertical",
    ];
  function B(t) {
    return "string" == typeof t;
  }
  var V = Number.isNaN || n.isNaN;
  function U(t) {
    return "number" == typeof t && !V(t);
  }
  function K(t) {
    return void 0 === t;
  }
  function Z(t) {
    return "object" === i(t) && null !== t;
  }
  var $ = Object.prototype.hasOwnProperty;
  function _(t) {
    if (!Z(t)) return !1;
    try {
      var e = t.constructor,
        i = e.prototype;
      return e && i && $.call(i, "isPrototypeOf");
    } catch (t) {
      return !1;
    }
  }
  function G(t) {
    return "function" == typeof t;
  }
  function J(e, i) {
    if (e && G(i))
      if (Array.isArray(e) || U(e.length))
        for (
          var t = e.length, n = 0;
          n < t && !1 !== i.call(e, e[n], n, e);
          n += 1
        );
      else
        Z(e) &&
          Object.keys(e).forEach(function (t) {
            i.call(e, e[t], t, e);
          });
    return e;
  }
  var Q =
      Object.assign ||
      function (i) {
        for (
          var t = arguments.length, e = new Array(1 < t ? t - 1 : 0), n = 1;
          n < t;
          n++
        )
          e[n - 1] = arguments[n];
        return (
          Z(i) &&
            0 < e.length &&
            e.forEach(function (e) {
              Z(e) &&
                Object.keys(e).forEach(function (t) {
                  i[t] = e[t];
                });
            }),
          i
        );
      },
    tt = /^(?:width|height|left|top|marginLeft|marginTop)$/;
  function et(t, e) {
    var i = t.style;
    J(e, function (t, e) {
      tt.test(e) && U(t) && (t += "px"), (i[e] = t);
    });
  }
  function it(t, e) {
    return (
      t &&
      e &&
      (t.classList ? t.classList.contains(e) : -1 < t.className.indexOf(e))
    );
  }
  function nt(t, e) {
    var i;
    t &&
      e &&
      (U(t.length)
        ? J(t, function (t) {
            nt(t, e);
          })
        : t.classList
        ? t.classList.add(e)
        : (i = t.className.trim())
        ? i.indexOf(e) < 0 && (t.className = i + " " + e)
        : (t.className = e));
  }
  function st(t, e) {
    t &&
      e &&
      (U(t.length)
        ? J(t, function (t) {
            st(t, e);
          })
        : t.classList
        ? t.classList.remove(e)
        : 0 <= t.className.indexOf(e) &&
          (t.className = t.className.replace(e, "")));
  }
  function ot(t, e, i) {
    e &&
      (U(t.length)
        ? J(t, function (t) {
            ot(t, e, i);
          })
        : (i ? nt : st)(t, e));
  }
  var at = /([a-z\d])([A-Z])/g;
  function rt(t) {
    return t.replace(at, "$1-$2").toLowerCase();
  }
  function ht(t, e) {
    return Z(t[e])
      ? t[e]
      : t.dataset
      ? t.dataset[e]
      : t.getAttribute("data-" + rt(e));
  }
  function lt(t, e, i) {
    Z(i)
      ? (t[e] = i)
      : t.dataset
      ? (t.dataset[e] = i)
      : t.setAttribute("data-" + rt(e), i);
  }
  var ct,
    ut,
    dt =
      ((ut = !1),
      t &&
        ((ct = !1),
        (zt = function () {}),
        (Dt = Object.defineProperty({}, "once", {
          get: function () {
            return (ut = !0), ct;
          },
          set: function (t) {
            ct = t;
          },
        })),
        n.addEventListener("test", zt, Dt),
        n.removeEventListener("test", zt, Dt)),
      ut);
  function mt(i, t, n, e) {
    var s = 3 < arguments.length && void 0 !== e ? e : {},
      o = n;
    t.trim()
      .split(j)
      .forEach(function (t) {
        var e;
        dt ||
          ((e = i.listeners) &&
            e[t] &&
            e[t][n] &&
            ((o = e[t][n]),
            delete e[t][n],
            0 === Object.keys(e[t]).length && delete e[t],
            0 === Object.keys(e).length && delete i.listeners)),
          i.removeEventListener(t, o, s);
      });
  }
  function gt(o, t, a, e) {
    var r = 3 < arguments.length && void 0 !== e ? e : {},
      h = a;
    t.trim()
      .split(j)
      .forEach(function (n) {
        var t, s;
        r.once &&
          !dt &&
          ((t = o.listeners),
          (h = function () {
            delete s[n][a], o.removeEventListener(n, h, r);
            for (var t = arguments.length, e = new Array(t), i = 0; i < t; i++)
              e[i] = arguments[i];
            a.apply(o, e);
          }),
          (s = void 0 === t ? {} : t)[n] || (s[n] = {}),
          s[n][a] && o.removeEventListener(n, s[n][a], r),
          (s[n][a] = h),
          (o.listeners = s)),
          o.addEventListener(n, h, r);
      });
  }
  function ft(t, e, i, n) {
    var s;
    return (
      G(Event) && G(CustomEvent)
        ? (s = new CustomEvent(
            e,
            l({ bubbles: !0, cancelable: !0, detail: i }, n)
          ))
        : (s = document.createEvent("CustomEvent")).initCustomEvent(
            e,
            !0,
            !0,
            i
          ),
      t.dispatchEvent(s)
    );
  }
  function vt(t) {
    var e = t.rotate,
      i = t.scaleX,
      n = t.scaleY,
      s = t.translateX,
      o = t.translateY,
      t = [];
    U(s) && 0 !== s && t.push("translateX(" + s + "px)"),
      U(o) && 0 !== o && t.push("translateY(" + o + "px)"),
      U(e) && 0 !== e && t.push("rotate(" + e + "deg)"),
      U(i) && 1 !== i && t.push("scaleX(" + i + ")"),
      U(n) && 1 !== n && t.push("scaleY(" + n + ")");
    t = t.length ? t.join(" ") : "none";
    return { WebkitTransform: t, msTransform: t, transform: t };
  }
  var pt =
    n.navigator &&
    /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(n.navigator.userAgent);
  function bt(i, t, e) {
    var n = document.createElement("img");
    if (i.naturalWidth && !pt) return e(i.naturalWidth, i.naturalHeight), n;
    var s = document.body || document.documentElement;
    return (
      (n.onload = function () {
        e(n.width, n.height), pt || s.removeChild(n);
      }),
      J(t.inheritedAttributes, function (t) {
        var e = i.getAttribute(t);
        null !== e && n.setAttribute(t, e);
      }),
      (n.src = i.src),
      pt ||
        ((n.style.cssText =
          "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;"),
        s.appendChild(n)),
      n
    );
  }
  function wt(t) {
    switch (t) {
      case 2:
        return "viewer-hide-xs-down";
      case 3:
        return "viewer-hide-sm-down";
      case 4:
        return "viewer-hide-md-down";
      default:
        return "";
    }
  }
  function yt(t, e) {
    var i = t.pageX,
      n = t.pageY,
      t = { endX: i, endY: n };
    return e ? t : l({ timeStamp: Date.now(), startX: i, startY: n }, t);
  }
  var xt,
    kt = {
      render: function () {
        this.initContainer(),
          this.initViewer(),
          this.initList(),
          this.renderViewer();
      },
      initBody: function () {
        var t = this.element.ownerDocument,
          e = t.body || t.documentElement;
        (this.body = e),
          (this.scrollbarWidth =
            window.innerWidth - t.documentElement.clientWidth),
          (this.initialBodyPaddingRight = e.style.paddingRight),
          (this.initialBodyComputedPaddingRight =
            window.getComputedStyle(e).paddingRight);
      },
      initContainer: function () {
        this.containerData = {
          width: window.innerWidth,
          height: window.innerHeight,
        };
      },
      initViewer: function () {
        var t,
          e = this.options,
          i = this.parent;
        e.inline &&
          ((t = {
            width: Math.max(i.offsetWidth, e.minWidth),
            height: Math.max(i.offsetHeight, e.minHeight),
          }),
          (this.parentData = t)),
          (!this.fulled && t) || (t = this.containerData),
          (this.viewerData = Q({}, t));
      },
      renderViewer: function () {
        this.options.inline && !this.fulled && et(this.viewer, this.viewerData);
      },
      initList: function () {
        var r = this,
          t = this.element,
          h = this.options,
          l = this.list,
          c = [];
        (l.innerHTML = ""),
          J(this.images, function (i, t) {
            var e,
              n,
              s = i.src,
              o =
                i.alt ||
                (B((e = s))
                  ? decodeURIComponent(
                      e.replace(/^.*\//, "").replace(/[?&#].*$/, "")
                    )
                  : ""),
              a = r.getImageURL(i);
            (s || a) &&
              ((e = document.createElement("li")),
              (n = document.createElement("img")),
              J(h.inheritedAttributes, function (t) {
                var e = i.getAttribute(t);
                null !== e && n.setAttribute(t, e);
              }),
              (n.src = s || a),
              (n.alt = o),
              n.setAttribute("data-original-url", a || s),
              e.setAttribute("data-index", t),
              e.setAttribute("data-viewer-action", "view"),
              e.setAttribute("role", "button"),
              h.keyboard && e.setAttribute("tabindex", 0),
              e.appendChild(n),
              l.appendChild(e),
              c.push(e));
          }),
          J((this.items = c), function (e) {
            var t,
              i,
              n = e.firstElementChild;
            lt(n, "filled", !0),
              h.loading && nt(e, y),
              gt(
                n,
                S,
                (t = function (t) {
                  mt(n, O, i), h.loading && st(e, y), r.loadImage(t);
                }),
                { once: !0 }
              ),
              gt(
                n,
                O,
                (i = function () {
                  mt(n, S, t), h.loading && st(e, y);
                }),
                { once: !0 }
              );
          }),
          h.transition &&
            gt(
              t,
              P,
              function () {
                nt(l, z);
              },
              { once: !0 }
            );
      },
      renderList: function () {
        var t,
          e,
          i = this.index,
          n = this.items[i];
        n &&
          ((e = n.nextElementSibling),
          (t = parseInt(window.getComputedStyle(e || n).marginLeft, 10)),
          (e = n.offsetWidth),
          et(
            this.list,
            Q(
              { width: (n = e + t) * this.length - t },
              vt({ translateX: (this.viewerData.width - e) / 2 - n * i })
            )
          ));
      },
      resetList: function () {
        var t = this.list;
        (t.innerHTML = ""), st(t, z), et(t, vt({ translateX: 0 }));
      },
      initImage: function (r) {
        var t,
          h = this,
          l = this.options,
          e = this.image,
          i = this.viewerData,
          n = this.footer.offsetHeight,
          c = i.width,
          u = Math.max(i.height - n, n),
          d = this.imageData || {};
        (this.imageInitializing = {
          abort: function () {
            t.onload = null;
          },
        }),
          (t = bt(e, l, function (t, e) {
            var i = t / e,
              n = c,
              s = u;
            (h.imageInitializing = !1), c < u * i ? (s = c / i) : (n = u * i);
            var n = Math.min(0.9 * n, t),
              s = Math.min(0.9 * s, e),
              o = (c - n) / 2,
              a = (u - s) / 2,
              t = {
                left: o,
                top: a,
                x: o,
                y: a,
                width: n,
                height: s,
                oldRatio: 1,
                ratio: n / t,
                aspectRatio: i,
                naturalWidth: t,
                naturalHeight: e,
              },
              e = Q({}, t);
            l.rotatable && ((t.rotate = d.rotate || 0), (e.rotate = 0)),
              l.scalable &&
                ((t.scaleX = d.scaleX || 1),
                (t.scaleY = d.scaleY || 1),
                (e.scaleX = 1),
                (e.scaleY = 1)),
              (h.imageData = t),
              (h.initialImageData = e),
              r && r();
          }));
      },
      renderImage: function (t) {
        var e,
          i = this,
          n = this.image,
          s = this.imageData;
        et(
          n,
          Q(
            {
              width: s.width,
              height: s.height,
              marginLeft: s.x,
              marginTop: s.y,
            },
            vt(s)
          )
        ),
          t &&
            ((this.viewing ||
              this.moving ||
              this.rotating ||
              this.scaling ||
              this.zooming) &&
            this.options.transition &&
            it(n, z)
              ? ((e = function () {
                  (i.imageRendering = !1), t();
                }),
                (this.imageRendering = {
                  abort: function () {
                    mt(n, N, e);
                  },
                }),
                gt(n, N, e, { once: !0 }))
              : t());
      },
      resetImage: function () {
        var t;
        (this.viewing || this.viewed) &&
          ((t = this.image),
          this.viewing && this.viewing.abort(),
          t.parentNode.removeChild(t),
          (this.image = null));
      },
    },
    r = {
      bind: function () {
        var t = this.options,
          e = this.viewer,
          i = this.canvas,
          n = this.element.ownerDocument;
        gt(e, D, (this.onClick = this.click.bind(this))),
          gt(e, E, (this.onDragStart = this.dragstart.bind(this))),
          gt(i, C, (this.onPointerDown = this.pointerdown.bind(this))),
          gt(n, R, (this.onPointerMove = this.pointermove.bind(this))),
          gt(n, L, (this.onPointerUp = this.pointerup.bind(this))),
          gt(n, A, (this.onKeyDown = this.keydown.bind(this))),
          gt(window, F, (this.onResize = this.resize.bind(this))),
          t.zoomable &&
            t.zoomOnWheel &&
            gt(e, Y, (this.onWheel = this.wheel.bind(this)), {
              passive: !1,
              capture: !0,
            }),
          t.toggleOnDblclick &&
            gt(i, T, (this.onDblclick = this.dblclick.bind(this)));
      },
      unbind: function () {
        var t = this.options,
          e = this.viewer,
          i = this.canvas,
          n = this.element.ownerDocument;
        mt(e, D, this.onClick),
          mt(e, E, this.onDragStart),
          mt(i, C, this.onPointerDown),
          mt(n, R, this.onPointerMove),
          mt(n, L, this.onPointerUp),
          mt(n, A, this.onKeyDown),
          mt(window, F, this.onResize),
          t.zoomable &&
            t.zoomOnWheel &&
            mt(e, Y, this.onWheel, { passive: !1, capture: !0 }),
          t.toggleOnDblclick && mt(i, T, this.onDblclick);
      },
    },
    t = {
      click: function (t) {
        var e = this.options,
          i = this.imageData,
          n = t.target,
          s = ht(n, W);
        switch (
          (s ||
            "img" !== n.localName ||
            "li" !== n.parentElement.localName ||
            (s = ht((n = n.parentElement), W)),
          a &&
            t.isTrusted &&
            n === this.canvas &&
            clearTimeout(this.clickCanvasTimeout),
          s)
        ) {
          case "mix":
            this.played
              ? this.stop()
              : e.inline
              ? this.fulled
                ? this.exit()
                : this.full()
              : this.hide();
            break;
          case "hide":
            this.hide();
            break;
          case "view":
            this.view(ht(n, "index"));
            break;
          case "zoom-in":
            this.zoom(0.1, !0);
            break;
          case "zoom-out":
            this.zoom(-0.1, !0);
            break;
          case "one-to-one":
            this.toggle();
            break;
          case "reset":
            this.reset();
            break;
          case "prev":
            this.prev(e.loop);
            break;
          case "play":
            this.play(e.fullscreen);
            break;
          case "next":
            this.next(e.loop);
            break;
          case "rotate-left":
            this.rotate(-90);
            break;
          case "rotate-right":
            this.rotate(90);
            break;
          case "flip-horizontal":
            this.scaleX(-i.scaleX || -1);
            break;
          case "flip-vertical":
            this.scaleY(-i.scaleY || -1);
            break;
          default:
            this.played && this.stop();
        }
      },
      dblclick: function (t) {
        t.preventDefault(),
          this.viewed &&
            t.target === this.image &&
            (a && t.isTrusted && clearTimeout(this.doubleClickImageTimeout),
            this.toggle(t));
      },
      load: function () {
        var t = this;
        this.timeout && (clearTimeout(this.timeout), (this.timeout = !1));
        var e = this.element,
          i = this.options,
          n = this.image,
          s = this.index,
          o = this.viewerData;
        st(n, w),
          i.loading && st(this.canvas, y),
          (n.style.cssText =
            "height:0;margin-left:" +
            o.width / 2 +
            "px;margin-top:" +
            o.height / 2 +
            "px;max-width:none!important;position:relative;width:0;"),
          this.initImage(function () {
            ot(n, "viewer-move", i.movable),
              ot(n, z, i.transition),
              t.renderImage(function () {
                (t.viewed = !0),
                  (t.viewing = !1),
                  G(i.viewed) && gt(e, P, i.viewed, { once: !0 }),
                  ft(
                    e,
                    P,
                    { originalImage: t.images[s], index: s, image: n },
                    { cancelable: !1 }
                  );
              });
          });
      },
      loadImage: function (t) {
        var n = t.target,
          t = n.parentNode,
          s = t.offsetWidth || 30,
          o = t.offsetHeight || 50,
          a = !!ht(n, "filled");
        bt(n, this.options, function (t, e) {
          var i = t / e,
            t = s,
            e = o;
          s < o * i
            ? a
              ? (t = o * i)
              : (e = s / i)
            : a
            ? (e = s / i)
            : (t = o * i),
            et(
              n,
              Q(
                { width: t, height: e },
                vt({ translateX: (s - t) / 2, translateY: (o - e) / 2 })
              )
            );
        });
      },
      keydown: function (t) {
        var e = this.options;
        if (e.keyboard) {
          var i = t.keyCode || t.which || t.charCode;
          if (
            (13 === i && this.viewer.contains(t.target) && this.click(t),
            this.fulled)
          )
            switch (i) {
              case 27:
                this.played
                  ? this.stop()
                  : e.inline
                  ? this.fulled && this.exit()
                  : this.hide();
                break;
              case 32:
                this.played && this.stop();
                break;
              case 37:
                this.prev(e.loop);
                break;
              case 38:
                t.preventDefault(), this.zoom(e.zoomRatio, !0);
                break;
              case 39:
                this.next(e.loop);
                break;
              case 40:
                t.preventDefault(), this.zoom(-e.zoomRatio, !0);
                break;
              case 48:
              case 49:
                t.ctrlKey && (t.preventDefault(), this.toggle());
            }
        }
      },
      dragstart: function (t) {
        "img" === t.target.localName && t.preventDefault();
      },
      pointerdown: function (t) {
        var e = this.options,
          i = this.pointers,
          n = t.buttons,
          s = t.button;
        !this.viewed ||
          this.showing ||
          this.viewing ||
          this.hiding ||
          (("mousedown" === t.type ||
            ("pointerdown" === t.type && "mouse" === t.pointerType)) &&
            ((U(n) && 1 !== n) || (U(s) && 0 !== s) || t.ctrlKey)) ||
          (t.preventDefault(),
          t.changedTouches
            ? J(t.changedTouches, function (t) {
                i[t.identifier] = yt(t);
              })
            : (i[t.pointerId || 0] = yt(t)),
          (s = !!e.movable && c),
          e.zoomOnTouch && e.zoomable && 1 < Object.keys(i).length
            ? (s = d)
            : e.slideOnTouch &&
              ("touch" === t.pointerType || "touchstart" === t.type) &&
              this.isSwitchable() &&
              (s = u),
          !e.transition || (s !== c && s !== d) || st(this.image, z),
          (this.action = s));
      },
      pointermove: function (t) {
        var e = this.pointers,
          i = this.action;
        this.viewed &&
          i &&
          (t.preventDefault(),
          t.changedTouches
            ? J(t.changedTouches, function (t) {
                Q(e[t.identifier] || {}, yt(t, !0));
              })
            : Q(e[t.pointerId || 0] || {}, yt(t, !0)),
          this.change(t));
      },
      pointerup: function (t) {
        var e,
          i = this,
          n = this.options,
          s = this.action,
          o = this.pointers;
        t.changedTouches
          ? J(t.changedTouches, function (t) {
              (e = o[t.identifier]), delete o[t.identifier];
            })
          : ((e = o[t.pointerId || 0]), delete o[t.pointerId || 0]),
          s &&
            (t.preventDefault(),
            !n.transition || (s !== c && s !== d) || nt(this.image, z),
            (this.action = !1),
            a &&
              s !== d &&
              e &&
              Date.now() - e.timeStamp < 500 &&
              (clearTimeout(this.clickCanvasTimeout),
              clearTimeout(this.doubleClickImageTimeout),
              n.toggleOnDblclick && this.viewed && t.target === this.image
                ? this.imageClicked
                  ? ((this.imageClicked = !1),
                    (this.doubleClickImageTimeout = setTimeout(function () {
                      ft(i.image, T);
                    }, 50)))
                  : ((this.imageClicked = !0),
                    (this.doubleClickImageTimeout = setTimeout(function () {
                      i.imageClicked = !1;
                    }, 500)))
                : ((this.imageClicked = !1),
                  n.backdrop &&
                    "static" !== n.backdrop &&
                    t.target === this.canvas &&
                    (this.clickCanvasTimeout = setTimeout(function () {
                      ft(i.canvas, D);
                    }, 50)))));
      },
      resize: function () {
        var e = this;
        this.isShown &&
          !this.hiding &&
          (this.fulled && (this.close(), this.initBody(), this.open()),
          this.initContainer(),
          this.initViewer(),
          this.renderViewer(),
          this.renderList(),
          this.viewed &&
            this.initImage(function () {
              e.renderImage();
            }),
          this.played &&
            (!this.options.fullscreen ||
            !this.fulled ||
            document.fullscreenElement ||
            document.webkitFullscreenElement ||
            document.mozFullScreenElement ||
            document.msFullscreenElement
              ? J(this.player.getElementsByTagName("img"), function (t) {
                  gt(t, S, e.loadImage.bind(e), { once: !0 }), ft(t, S);
                })
              : this.stop()));
      },
      wheel: function (t) {
        var e,
          i,
          n = this;
        this.viewed &&
          (t.preventDefault(),
          this.wheeling ||
            ((this.wheeling = !0),
            setTimeout(function () {
              n.wheeling = !1;
            }, 50),
            (e = Number(this.options.zoomRatio) || 0.1),
            (i = 1),
            t.deltaY
              ? (i = 0 < t.deltaY ? 1 : -1)
              : t.wheelDelta
              ? (i = -t.wheelDelta / 120)
              : t.detail && (i = 0 < t.detail ? 1 : -1),
            this.zoom(-i * e, !0, t)));
      },
    },
    zt = {
      show: function () {
        var t = 0 < arguments.length && void 0 !== arguments[0] && arguments[0],
          e = this.element,
          i = this.options;
        if (i.inline || this.showing || this.isShown || this.showing)
          return this;
        if (!this.ready) return this.build(), this.ready && this.show(t), this;
        if (
          (G(i.show) && gt(e, M, i.show, { once: !0 }),
          !1 === ft(e, M) || !this.ready)
        )
          return this;
        this.hiding && this.transitioning.abort(),
          (this.showing = !0),
          this.open();
        var n,
          s = this.viewer;
        return (
          st(s, b),
          s.setAttribute("role", "dialog"),
          s.setAttribute("aria-labelledby", this.title.id),
          s.setAttribute("aria-modal", !0),
          s.removeAttribute("aria-hidden"),
          i.transition && !t
            ? ((n = this.shown.bind(this)),
              (this.transitioning = {
                abort: function () {
                  mt(s, N, n), st(s, m);
                },
              }),
              nt(s, z),
              (s.initialOffsetWidth = s.offsetWidth),
              gt(s, N, n, { once: !0 }),
              nt(s, m))
            : (nt(s, m), this.shown()),
          this
        );
      },
      hide: function () {
        var i = this,
          t = 0 < arguments.length && void 0 !== arguments[0] && arguments[0],
          e = this.element,
          n = this.options;
        if (n.inline || this.hiding || (!this.isShown && !this.showing))
          return this;
        if (
          (G(n.hide) && gt(e, "hide", n.hide, { once: !0 }),
          !1 === ft(e, "hide"))
        )
          return this;
        this.showing && this.transitioning.abort(),
          (this.hiding = !0),
          this.played ? this.stop() : this.viewing && this.viewing.abort();
        var s,
          o,
          a = this.viewer,
          r = this.image,
          h = function () {
            st(a, m), i.hidden();
          };
        return (
          n.transition && !t
            ? ((s = function t(e) {
                e && e.target === a && (mt(a, N, t), i.hidden());
              }),
              (o = function () {
                it(a, z) ? (gt(a, N, s), st(a, m)) : h();
              }),
              (this.transitioning = {
                abort: function () {
                  i.viewed && it(r, z) ? mt(r, N, o) : it(a, z) && mt(a, N, s);
                },
              }),
              this.viewed && it(r, z)
                ? (gt(r, N, o, { once: !0 }), this.zoomTo(0, !1, null, !0))
                : o())
            : h(),
          this
        );
      },
      view: function () {
        var i = this,
          t =
            0 < arguments.length && void 0 !== arguments[0]
              ? arguments[0]
              : this.options.initialViewIndex,
          t = Number(t) || 0;
        if (
          this.hiding ||
          this.played ||
          t < 0 ||
          t >= this.length ||
          (this.viewed && t === this.index)
        )
          return this;
        if (!this.isShown) return (this.index = t), this.show();
        this.viewing && this.viewing.abort();
        var e = this.element,
          n = this.options,
          s = this.title,
          o = this.canvas,
          a = this.items[t],
          r = a.querySelector("img"),
          h = ht(r, "originalUrl"),
          l = r.getAttribute("alt"),
          c = document.createElement("img");
        if (
          (J(n.inheritedAttributes, function (t) {
            var e = r.getAttribute(t);
            null !== e && c.setAttribute(t, e);
          }),
          (c.src = h),
          (c.alt = l),
          G(n.view) && gt(e, "view", n.view, { once: !0 }),
          !1 ===
            ft(e, "view", {
              originalImage: this.images[t],
              index: t,
              image: c,
            }) ||
            !this.isShown ||
            this.hiding ||
            this.played)
        )
          return this;
        h = this.items[this.index];
        h && (st(h, f), h.removeAttribute("aria-selected")),
          nt(a, f),
          a.setAttribute("aria-selected", !0),
          n.focus && a.focus(),
          (this.image = c),
          (this.viewed = !1),
          (this.index = t),
          (this.imageData = {}),
          nt(c, w),
          n.loading && nt(o, y),
          (o.innerHTML = ""),
          o.appendChild(c),
          this.renderList(),
          (s.innerHTML = "");
        function u() {
          var t = i.imageData,
            e = Array.isArray(n.title) ? n.title[1] : n.title;
          s.textContent = G(e)
            ? e.call(i, c, t)
            : l + " (" + t.naturalWidth + " × " + t.naturalHeight + ")";
        }
        var d, m;
        return (
          gt(e, P, u, { once: !0 }),
          (this.viewing = {
            abort: function () {
              mt(e, P, u),
                c.complete
                  ? i.imageRendering
                    ? i.imageRendering.abort()
                    : i.imageInitializing && i.imageInitializing.abort()
                  : ((c.src = ""),
                    mt(c, S, d),
                    i.timeout && clearTimeout(i.timeout));
            },
          }),
          c.complete
            ? this.load()
            : (gt(
                c,
                S,
                (d = function () {
                  mt(c, O, m), i.load();
                }),
                { once: !0 }
              ),
              gt(
                c,
                O,
                (m = function () {
                  mt(c, S, d),
                    i.timeout && (clearTimeout(i.timeout), (i.timeout = !1)),
                    st(c, w),
                    n.loading && st(i.canvas, y);
                }),
                { once: !0 }
              ),
              this.timeout && clearTimeout(this.timeout),
              (this.timeout = setTimeout(function () {
                st(c, w), (i.timeout = !1);
              }, 1e3))),
          this
        );
      },
      prev: function () {
        var t = this.index - 1;
        return (
          t < 0 &&
            (t =
              0 < arguments.length && void 0 !== arguments[0] && arguments[0]
                ? this.length - 1
                : 0),
          this.view(t),
          this
        );
      },
      next: function () {
        var t = this.length - 1,
          e = this.index + 1;
        return (
          this.view(
            (e =
              t < e
                ? 0 < arguments.length &&
                  void 0 !== arguments[0] &&
                  arguments[0]
                  ? 0
                  : t
                : e)
          ),
          this
        );
      },
      move: function (t) {
        var e =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          i = this.imageData;
        return (
          this.moveTo(K(t) ? t : i.x + Number(t), K(e) ? e : i.y + Number(e)),
          this
        );
      },
      moveTo: function (t) {
        var e = this,
          i =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          n =
            2 < arguments.length && void 0 !== arguments[2]
              ? arguments[2]
              : null,
          s = this.element,
          o = this.options,
          a = this.imageData;
        if (
          ((t = Number(t)),
          (i = Number(i)),
          this.viewed && !this.played && o.movable)
        ) {
          var r = a.x,
            h = a.y,
            l = !1;
          if ((U(t) ? (l = !0) : (t = r), U(i) ? (l = !0) : (i = h), l)) {
            if (
              (G(o.move) && gt(s, "move", o.move, { once: !0 }),
              !1 ===
                ft(s, "move", {
                  x: t,
                  y: i,
                  oldX: r,
                  oldY: h,
                  originalEvent: n,
                }))
            )
              return this;
            (a.x = t),
              (a.y = i),
              (a.left = t),
              (a.top = i),
              (this.moving = !0),
              this.renderImage(function () {
                (e.moving = !1),
                  G(o.moved) && gt(s, "moved", o.moved, { once: !0 }),
                  ft(
                    s,
                    "moved",
                    { x: t, y: i, oldX: r, oldY: h, originalEvent: n },
                    { cancelable: !1 }
                  );
              });
          }
        }
        return this;
      },
      rotate: function (t) {
        return this.rotateTo((this.imageData.rotate || 0) + Number(t)), this;
      },
      rotateTo: function (t) {
        var e = this,
          i = this.element,
          n = this.options,
          s = this.imageData;
        if (U((t = Number(t))) && this.viewed && !this.played && n.rotatable) {
          var o = s.rotate;
          if (
            (G(n.rotate) && gt(i, "rotate", n.rotate, { once: !0 }),
            !1 === ft(i, "rotate", { degree: t, oldDegree: o }))
          )
            return this;
          (s.rotate = t),
            (this.rotating = !0),
            this.renderImage(function () {
              (e.rotating = !1),
                G(n.rotated) && gt(i, q, n.rotated, { once: !0 }),
                ft(i, q, { degree: t, oldDegree: o }, { cancelable: !1 });
            });
        }
        return this;
      },
      scaleX: function (t) {
        return this.scale(t, this.imageData.scaleY), this;
      },
      scaleY: function (t) {
        return this.scale(this.imageData.scaleX, t), this;
      },
      scale: function (t) {
        var e = this,
          i =
            1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : t,
          n = this.element,
          s = this.options,
          o = this.imageData;
        if (
          ((t = Number(t)),
          (i = Number(i)),
          this.viewed && !this.played && s.scalable)
        ) {
          var a = o.scaleX,
            r = o.scaleY,
            h = !1;
          if ((U(t) ? (h = !0) : (t = a), U(i) ? (h = !0) : (i = r), h)) {
            if (
              (G(s.scale) && gt(n, "scale", s.scale, { once: !0 }),
              !1 ===
                ft(n, "scale", {
                  scaleX: t,
                  scaleY: i,
                  oldScaleX: a,
                  oldScaleY: r,
                }))
            )
              return this;
            (o.scaleX = t),
              (o.scaleY = i),
              (this.scaling = !0),
              this.renderImage(function () {
                (e.scaling = !1),
                  G(s.scaled) && gt(n, "scaled", s.scaled, { once: !0 }),
                  ft(
                    n,
                    "scaled",
                    { scaleX: t, scaleY: i, oldScaleX: a, oldScaleY: r },
                    { cancelable: !1 }
                  );
              });
          }
        }
        return this;
      },
      zoom: function (t) {
        var e = 1 < arguments.length && void 0 !== arguments[1] && arguments[1],
          i =
            2 < arguments.length && void 0 !== arguments[2]
              ? arguments[2]
              : null,
          n = this.imageData;
        return (
          (t = Number(t)),
          this.zoomTo(
            (n.width * (t = t < 0 ? 1 / (1 - t) : 1 + t)) / n.naturalWidth,
            e,
            i
          ),
          this
        );
      },
      zoomTo: function (t) {
        var i,
          n,
          s,
          e = this,
          o = 1 < arguments.length && void 0 !== arguments[1] && arguments[1],
          a =
            2 < arguments.length && void 0 !== arguments[2]
              ? arguments[2]
              : null,
          r = 3 < arguments.length && void 0 !== arguments[3] && arguments[3],
          h = this.element,
          l = this.options,
          c = this.pointers,
          u = this.imageData,
          d = u.x,
          m = u.y,
          g = u.width,
          f = u.height,
          v = u.naturalWidth,
          p = u.naturalHeight;
        if (
          U((t = Math.max(0, t))) &&
          this.viewed &&
          !this.played &&
          (r || l.zoomable)
        ) {
          if (
            (r ||
              ((b = Math.max(0.01, l.minZoomRatio)),
              (w = Math.min(100, l.maxZoomRatio)),
              (t = Math.min(Math.max(t, b), w))),
            a)
          )
            switch (a.type) {
              case "wheel":
                0.055 <= l.zoomRatio && 0.95 < t && t < 1.05 && (t = 1);
                break;
              case "pointermove":
              case "touchmove":
              case "mousemove":
                0.99 < t && t < 1.01 && (t = 1);
            }
          var r = v * t,
            b = p * t,
            w = r - g,
            v = b - f,
            y = u.ratio;
          if (
            (G(l.zoom) && gt(h, "zoom", l.zoom, { once: !0 }),
            !1 === ft(h, "zoom", { ratio: t, oldRatio: y, originalEvent: a }))
          )
            return this;
          (this.zooming = !0),
            a
              ? ((p = {
                  left:
                    (p = (p = this.viewer).getBoundingClientRect()).left +
                    (window.pageXOffset - document.documentElement.clientLeft),
                  top:
                    p.top +
                    (window.pageYOffset - document.documentElement.clientTop),
                }),
                (c =
                  c && Object.keys(c).length
                    ? ((s = n = i = 0),
                      J(c, function (t) {
                        var e = t.startX,
                          t = t.startY;
                        (i += e), (n += t), (s += 1);
                      }),
                      { pageX: (i /= s), pageY: (n /= s) })
                    : { pageX: a.pageX, pageY: a.pageY }),
                (u.x -= ((c.pageX - p.left - d) / g) * w),
                (u.y -= ((c.pageY - p.top - m) / f) * v))
              : ((u.x -= w / 2), (u.y -= v / 2)),
            (u.left = u.x),
            (u.top = u.y),
            (u.width = r),
            (u.height = b),
            (u.oldRatio = y),
            (u.ratio = t),
            this.renderImage(function () {
              (e.zooming = !1),
                G(l.zoomed) && gt(h, "zoomed", l.zoomed, { once: !0 }),
                ft(
                  h,
                  "zoomed",
                  { ratio: t, oldRatio: y, originalEvent: a },
                  { cancelable: !1 }
                );
            }),
            o && this.tooltip();
        }
        return this;
      },
      play: function () {
        var e = this,
          t = 0 < arguments.length && void 0 !== arguments[0] && arguments[0];
        if (!this.isShown || this.played) return this;
        var i = this.element,
          s = this.options;
        if (
          (G(s.play) && gt(i, "play", s.play, { once: !0 }),
          !1 === ft(i, "play"))
        )
          return this;
        var o = this.player,
          a = this.loadImage.bind(this),
          r = [],
          h = 0,
          l = 0;
        return (
          (this.played = !0),
          (this.onLoadWhenPlay = a),
          t && this.requestFullscreen(t),
          nt(o, k),
          J(this.items, function (t, e) {
            var i = t.querySelector("img"),
              n = document.createElement("img");
            (n.src = ht(i, "originalUrl")),
              (n.alt = i.getAttribute("alt")),
              (n.referrerPolicy = i.referrerPolicy),
              (h += 1),
              nt(n, v),
              ot(n, z, s.transition),
              it(t, f) && (nt(n, m), (l = e)),
              r.push(n),
              gt(n, S, a, { once: !0 }),
              o.appendChild(n);
          }),
          U(s.interval) &&
            0 < s.interval &&
            1 < h &&
            (function t() {
              e.playing = setTimeout(function () {
                st(r[l], m), nt(r[(l = (l += 1) < h ? l : 0)], m), t();
              }, s.interval);
            })(),
          this
        );
      },
      stop: function () {
        var e = this;
        if (!this.played) return this;
        var t = this.element,
          i = this.options;
        if (
          (G(i.stop) && gt(t, "stop", i.stop, { once: !0 }),
          !1 === ft(t, "stop"))
        )
          return this;
        t = this.player;
        return (
          (this.played = !1),
          clearTimeout(this.playing),
          J(t.getElementsByTagName("img"), function (t) {
            mt(t, S, e.onLoadWhenPlay);
          }),
          st(t, k),
          (t.innerHTML = ""),
          this.exitFullscreen(),
          this
        );
      },
      full: function () {
        var t = this,
          e = this.options,
          i = this.viewer,
          n = this.image,
          s = this.list;
        return (
          !this.isShown ||
            this.played ||
            this.fulled ||
            !e.inline ||
            ((this.fulled = !0),
            this.open(),
            nt(this.button, h),
            e.transition && (st(s, z), this.viewed && st(n, z)),
            nt(i, p),
            i.setAttribute("role", "dialog"),
            i.setAttribute("aria-labelledby", this.title.id),
            i.setAttribute("aria-modal", !0),
            i.removeAttribute("style"),
            et(i, { zIndex: e.zIndex }),
            e.focus && this.enforceFocus(),
            this.initContainer(),
            (this.viewerData = Q({}, this.containerData)),
            this.renderList(),
            this.viewed &&
              this.initImage(function () {
                t.renderImage(function () {
                  e.transition &&
                    setTimeout(function () {
                      nt(n, z), nt(s, z);
                    }, 0);
                });
              })),
          this
        );
      },
      exit: function () {
        var t = this,
          e = this.options,
          i = this.viewer,
          n = this.image,
          s = this.list;
        return (
          this.isShown &&
            !this.played &&
            this.fulled &&
            e.inline &&
            ((this.fulled = !1),
            this.close(),
            st(this.button, h),
            e.transition && (st(s, z), this.viewed && st(n, z)),
            e.focus && this.clearEnforceFocus(),
            i.removeAttribute("role"),
            i.removeAttribute("aria-labelledby"),
            i.removeAttribute("aria-modal"),
            st(i, p),
            et(i, { zIndex: e.zIndexInline }),
            (this.viewerData = Q({}, this.parentData)),
            this.renderViewer(),
            this.renderList(),
            this.viewed &&
              this.initImage(function () {
                t.renderImage(function () {
                  e.transition &&
                    setTimeout(function () {
                      nt(n, z), nt(s, z);
                    }, 0);
                });
              })),
          this
        );
      },
      tooltip: function () {
        var t = this,
          e = this.options,
          i = this.tooltipBox,
          n = this.imageData;
        return (
          this.viewed &&
            !this.played &&
            e.tooltip &&
            ((i.textContent = Math.round(100 * n.ratio) + "%"),
            this.tooltipping
              ? clearTimeout(this.tooltipping)
              : e.transition
              ? (this.fading && ft(i, N),
                nt(i, k),
                nt(i, v),
                nt(i, z),
                i.removeAttribute("aria-hidden"),
                (i.initialOffsetWidth = i.offsetWidth),
                nt(i, m))
              : (nt(i, k), i.removeAttribute("aria-hidden")),
            (this.tooltipping = setTimeout(function () {
              e.transition
                ? (gt(
                    i,
                    N,
                    function () {
                      st(i, k),
                        st(i, v),
                        st(i, z),
                        i.setAttribute("aria-hidden", !0),
                        (t.fading = !1);
                    },
                    { once: !0 }
                  ),
                  st(i, m),
                  (t.fading = !0))
                : (st(i, k), i.setAttribute("aria-hidden", !0)),
                (t.tooltipping = !1);
            }, 1e3))),
          this
        );
      },
      toggle: function () {
        var t =
          0 < arguments.length && void 0 !== arguments[0] ? arguments[0] : null;
        return (
          1 === this.imageData.ratio
            ? this.zoomTo(this.imageData.oldRatio, !0, t)
            : this.zoomTo(1, !0, t),
          this
        );
      },
      reset: function () {
        return (
          this.viewed &&
            !this.played &&
            ((this.imageData = Q({}, this.initialImageData)),
            this.renderImage()),
          this
        );
      },
      update: function () {
        var e = this,
          t = this.element,
          i = this.options,
          n = this.isImg;
        if (n && !t.parentNode) return this.destroy();
        var s,
          o = [];
        return (
          J(n ? [t] : t.querySelectorAll("img"), function (t) {
            G(i.filter)
              ? i.filter.call(e, t) && o.push(t)
              : e.getImageURL(t) && o.push(t);
          }),
          o.length &&
            ((this.images = o),
            (this.length = o.length),
            this.ready
              ? ((s = []),
                J(this.items, function (t, e) {
                  var i = t.querySelector("img"),
                    t = o[e];
                  (t && i && t.src === i.src && t.alt === i.alt) || s.push(e);
                }),
                et(this.list, { width: "auto" }),
                this.initList(),
                this.isShown &&
                  (this.length
                    ? this.viewed &&
                      (0 <= (t = s.indexOf(this.index))
                        ? ((this.viewed = !1),
                          this.view(
                            Math.max(
                              Math.min(this.index - t, this.length - 1),
                              0
                            )
                          ))
                        : (nt((t = this.items[this.index]), f),
                          t.setAttribute("aria-selected", !0)))
                    : ((this.image = null),
                      (this.viewed = !1),
                      (this.index = 0),
                      (this.imageData = {}),
                      (this.canvas.innerHTML = ""),
                      (this.title.innerHTML = ""))))
              : this.build()),
          this
        );
      },
      destroy: function () {
        var t = this.element,
          e = this.options;
        return (
          t[g] &&
            ((this.destroyed = !0),
            this.ready
              ? (this.played && this.stop(),
                e.inline
                  ? (this.fulled && this.exit(), this.unbind())
                  : this.isShown
                  ? (this.viewing &&
                      (this.imageRendering
                        ? this.imageRendering.abort()
                        : this.imageInitializing &&
                          this.imageInitializing.abort()),
                    this.hiding && this.transitioning.abort(),
                    this.hidden())
                  : this.showing && (this.transitioning.abort(), this.hidden()),
                (this.ready = !1),
                this.viewer.parentNode.removeChild(this.viewer))
              : e.inline &&
                (this.delaying
                  ? this.delaying.abort()
                  : this.initializing && this.initializing.abort()),
            e.inline || mt(t, D, this.onStart),
            (t[g] = void 0)),
          this
        );
      },
    },
    Dt = {
      getImageURL: function (t) {
        var e = this.options.url;
        return (e = B(e) ? t.getAttribute(e) : G(e) ? e.call(this, t) : "");
      },
      enforceFocus: function () {
        var i = this;
        this.clearEnforceFocus(),
          gt(
            document,
            I,
            (this.onFocusin = function (t) {
              var e = i.viewer,
                t = t.target;
              t === document ||
                t === e ||
                e.contains(t) ||
                (null !== t.getAttribute("tabindex") &&
                  "true" === t.getAttribute("aria-modal")) ||
                e.focus();
            })
          );
      },
      clearEnforceFocus: function () {
        this.onFocusin &&
          (mt(document, I, this.onFocusin), (this.onFocusin = null));
      },
      open: function () {
        var t = this.body;
        nt(t, x),
          (t.style.paddingRight =
            this.scrollbarWidth +
            (parseFloat(this.initialBodyComputedPaddingRight) || 0) +
            "px");
      },
      close: function () {
        var t = this.body;
        st(t, x), (t.style.paddingRight = this.initialBodyPaddingRight);
      },
      shown: function () {
        var t = this.element,
          e = this.options,
          i = this.viewer;
        (this.fulled = !0),
          (this.isShown = !0),
          this.render(),
          this.bind(),
          (this.showing = !1),
          e.focus && (i.focus(), this.enforceFocus()),
          G(e.shown) && gt(t, "shown", e.shown, { once: !0 }),
          !1 !== ft(t, "shown") &&
            this.ready &&
            this.isShown &&
            !this.hiding &&
            this.view(this.index);
      },
      hidden: function () {
        var t = this.element,
          e = this.options,
          i = this.viewer;
        e.fucus && this.clearEnforceFocus(),
          (this.fulled = !1),
          (this.viewed = !1),
          (this.isShown = !1),
          this.close(),
          this.unbind(),
          nt(i, b),
          i.removeAttribute("role"),
          i.removeAttribute("aria-labelledby"),
          i.removeAttribute("aria-modal"),
          i.setAttribute("aria-hidden", !0),
          this.resetList(),
          this.resetImage(),
          (this.hiding = !1),
          this.destroyed ||
            (G(e.hidden) && gt(t, "hidden", e.hidden, { once: !0 }),
            ft(t, "hidden", null, { cancelable: !1 }));
      },
      requestFullscreen: function (t) {
        var e = this.element.ownerDocument;
        this.fulled &&
          !(
            e.fullscreenElement ||
            e.webkitFullscreenElement ||
            e.mozFullScreenElement ||
            e.msFullscreenElement
          ) &&
          ((e = e.documentElement).requestFullscreen
            ? _(t)
              ? e.requestFullscreen(t)
              : e.requestFullscreen()
            : e.webkitRequestFullscreen
            ? e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)
            : e.mozRequestFullScreen
            ? e.mozRequestFullScreen()
            : e.msRequestFullscreen && e.msRequestFullscreen());
      },
      exitFullscreen: function () {
        var t = this.element.ownerDocument;
        this.fulled &&
          (t.fullscreenElement ||
            t.webkitFullscreenElement ||
            t.mozFullScreenElement ||
            t.msFullscreenElement) &&
          (t.exitFullscreen
            ? t.exitFullscreen()
            : t.webkitExitFullscreen
            ? t.webkitExitFullscreen()
            : t.mozCancelFullScreen
            ? t.mozCancelFullScreen()
            : t.msExitFullscreen && t.msExitFullscreen());
      },
      change: function (t) {
        var e = this.options,
          i = this.pointers,
          n = i[Object.keys(i)[0]];
        if (n) {
          var o,
            a,
            s = n.endX - n.startX,
            r = n.endY - n.startY;
          switch (this.action) {
            case c:
              this.move(s, r, t);
              break;
            case d:
              this.zoom(
                ((o = l({}, (h = i))),
                (a = []),
                J(h, function (s, t) {
                  delete o[t],
                    J(o, function (t) {
                      var e = Math.abs(s.startX - t.startX),
                        i = Math.abs(s.startY - t.startY),
                        n = Math.abs(s.endX - t.endX),
                        t = Math.abs(s.endY - t.endY),
                        i = Math.sqrt(e * e + i * i),
                        t = Math.sqrt(n * n + t * t);
                      a.push((t - i) / i);
                    });
                }),
                a.sort(function (t, e) {
                  return Math.abs(t) < Math.abs(e);
                }),
                a[0]),
                !1,
                t
              );
              break;
            case u:
              this.action = "switched";
              var h = Math.abs(s);
              1 < h &&
                h > Math.abs(r) &&
                ((this.pointers = {}),
                1 < s ? this.prev(e.loop) : s < -1 && this.next(e.loop));
          }
          J(i, function (t) {
            (t.startX = t.endX), (t.startY = t.endY);
          });
        }
      },
      isSwitchable: function () {
        var t = this.imageData,
          e = this.viewerData;
        return (
          1 < this.length &&
          0 <= t.x &&
          0 <= t.y &&
          t.width <= e.width &&
          t.height <= e.height
        );
      },
    },
    Tt = n.Viewer,
    Et =
      ((xt = -1),
      function () {
        return (xt += 1);
      }),
    n = (function () {
      function i(t) {
        var e =
          1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {};
        if (
          (!(function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          })(this, i),
          !t || 1 !== t.nodeType)
        )
          throw new Error(
            "The first argument is required and must be an element."
          );
        (this.element = t),
          (this.options = Q({}, o, _(e) && e)),
          (this.action = !1),
          (this.fading = !1),
          (this.fulled = !1),
          (this.hiding = !1),
          (this.imageClicked = !1),
          (this.imageData = {}),
          (this.index = this.options.initialViewIndex),
          (this.isImg = !1),
          (this.isShown = !1),
          (this.length = 0),
          (this.moving = !1),
          (this.played = !1),
          (this.playing = !1),
          (this.pointers = {}),
          (this.ready = !1),
          (this.rotating = !1),
          (this.scaling = !1),
          (this.showing = !1),
          (this.timeout = !1),
          (this.tooltipping = !1),
          (this.viewed = !1),
          (this.viewing = !1),
          (this.wheeling = !1),
          (this.zooming = !1),
          (this.id = Et()),
          this.init();
      }
      var t, e, n;
      return (
        (t = i),
        (n = [
          {
            key: "noConflict",
            value: function () {
              return (window.Viewer = Tt), i;
            },
          },
          {
            key: "setDefaults",
            value: function (t) {
              Q(o, _(t) && t);
            },
          },
        ]),
        (e = [
          {
            key: "init",
            value: function () {
              var t,
                e,
                i,
                n,
                s = this,
                o = this.element,
                a = this.options;
              o[g] ||
                ((o[g] = this),
                a.focus && !a.keyboard && (a.focus = !1),
                (t = "img" === o.localName),
                (e = []),
                J(t ? [o] : o.querySelectorAll("img"), function (t) {
                  G(a.filter)
                    ? a.filter.call(s, t) && e.push(t)
                    : s.getImageURL(t) && e.push(t);
                }),
                (this.isImg = t),
                (this.length = e.length),
                (this.images = e),
                this.initBody(),
                K(document.createElement(g).style.transition) &&
                  (a.transition = !1),
                a.inline
                  ? ((i = 0),
                    (n = function () {
                      var t;
                      (i += 1) === s.length &&
                        ((s.initializing = !1),
                        (s.delaying = {
                          abort: function () {
                            clearTimeout(t);
                          },
                        }),
                        (t = setTimeout(function () {
                          (s.delaying = !1), s.build();
                        }, 0)));
                    }),
                    (this.initializing = {
                      abort: function () {
                        J(e, function (t) {
                          t.complete || mt(t, S, n);
                        });
                      },
                    }),
                    J(e, function (t) {
                      t.complete ? n() : gt(t, S, n, { once: !0 });
                    }))
                  : gt(
                      o,
                      D,
                      (this.onStart = function (t) {
                        t = t.target;
                        "img" !== t.localName ||
                          (G(a.filter) && !a.filter.call(s, t)) ||
                          s.view(s.images.indexOf(t));
                      })
                    ));
            },
          },
          {
            key: "build",
            value: function () {
              var t, o, e, i, n, s, a, r, h, l, c, u, d, m;
              this.ready ||
                ((t = this.element),
                (o = this.options),
                (e = t.parentNode),
                ((d = document.createElement("div")).innerHTML =
                  '<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>'),
                (n = (i = d.querySelector(
                  "." + g + "-container"
                )).querySelector("." + g + "-title")),
                (s = i.querySelector("." + g + "-toolbar")),
                (a = i.querySelector("." + g + "-navbar")),
                (m = i.querySelector("." + g + "-button")),
                (d = i.querySelector("." + g + "-canvas")),
                (this.parent = e),
                (this.viewer = i),
                (this.title = n),
                (this.toolbar = s),
                (this.navbar = a),
                (this.button = m),
                (this.canvas = d),
                (this.footer = i.querySelector("." + g + "-footer")),
                (this.tooltipBox = i.querySelector("." + g + "-tooltip")),
                (this.player = i.querySelector("." + g + "-player")),
                (this.list = i.querySelector("." + g + "-list")),
                (i.id = g + this.id),
                (n.id = g + "Title" + this.id),
                nt(
                  n,
                  o.title
                    ? wt(Array.isArray(o.title) ? o.title[0] : o.title)
                    : b
                ),
                nt(a, o.navbar ? wt(o.navbar) : b),
                ot(m, b, !o.button),
                o.keyboard && m.setAttribute("tabindex", 0),
                o.backdrop &&
                  (nt(i, g + "-backdrop"),
                  o.inline || "static" === o.backdrop || lt(d, W, "hide")),
                B(o.className) &&
                  o.className &&
                  o.className.split(j).forEach(function (t) {
                    nt(i, t);
                  }),
                o.toolbar
                  ? ((r = document.createElement("ul")),
                    (h = _(o.toolbar)),
                    (l = H.slice(0, 3)),
                    (c = H.slice(7, 9)),
                    (u = H.slice(9)),
                    h || nt(s, wt(o.toolbar)),
                    J(h ? o.toolbar : H, function (t, e) {
                      var i = h && _(t),
                        n = h ? rt(e) : t,
                        s = i && !K(t.show) ? t.show : t;
                      !s ||
                        (!o.zoomable && -1 !== l.indexOf(n)) ||
                        (!o.rotatable && -1 !== c.indexOf(n)) ||
                        (!o.scalable && -1 !== u.indexOf(n)) ||
                        ((e = i && !K(t.size) ? t.size : t),
                        (i = i && !K(t.click) ? t.click : t),
                        (t = document.createElement("li")),
                        o.keyboard && t.setAttribute("tabindex", 0),
                        t.setAttribute("role", "button"),
                        nt(t, g + "-" + n),
                        G(i) || lt(t, W, n),
                        U(s) && nt(t, wt(s)),
                        -1 !== ["small", "large"].indexOf(e)
                          ? nt(t, g + "-" + e)
                          : "play" === n && nt(t, g + "-large"),
                        G(i) && gt(t, D, i),
                        r.appendChild(t));
                    }),
                    s.appendChild(r))
                  : nt(s, b),
                o.rotatable ||
                  (nt((d = s.querySelectorAll('li[class*="rotate"]')), w),
                  J(d, function (t) {
                    s.appendChild(t);
                  })),
                o.inline
                  ? (nt(m, "viewer-fullscreen"),
                    et(i, { zIndex: o.zIndexInline }),
                    "static" === window.getComputedStyle(e).position &&
                      et(e, { position: "relative" }),
                    e.insertBefore(i, t.nextSibling))
                  : (nt(m, "viewer-close"),
                    nt(i, p),
                    nt(i, v),
                    nt(i, b),
                    et(i, { zIndex: o.zIndex }),
                    (m =
                      (m = B((m = o.container))
                        ? t.ownerDocument.querySelector(m)
                        : m) || this.body).appendChild(i)),
                o.inline && (this.render(), this.bind(), (this.isShown = !0)),
                (this.ready = !0),
                G(o.ready) && gt(t, X, o.ready, { once: !0 }),
                !1 !== ft(t, X)
                  ? this.ready && o.inline && this.view(this.index)
                  : (this.ready = !1));
            },
          },
        ]) && s(t.prototype, e),
        n && s(t, n),
        i
      );
    })();
  return Q(n.prototype, kt, r, t, zt, Dt), n;
});
